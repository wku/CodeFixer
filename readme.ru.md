# CodeFixer

Утилита для автоматического анализа и исправления ошибок в Python-коде с использованием языковых моделей через OpenRouter API.

## Возможности

- Автоматическое обнаружение синтаксических ошибок
- Исправление логических ошибок
- Оптимизация неэффективного кода
- Улучшение стиля кодирования
- Исправление проблем с обработкой исключений
- Создание резервных копий исходных файлов

## Установка

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/codefixer.git
cd codefixer
```

2. Установите необходимые зависимости:
```
pip install openai
```

3. Настройте API ключ:
```
export OPENROUTER_API_KEY="ваш_ключ_api"
```

## Использование

Для анализа и исправления файла:

```bash
python main.py t.py
```

Для использования другой модели:

```bash
python main.py t.py --model="anthropic/claude-3-haiku-20240307"
```

## Структура файлов

- `main.py`: Основной скрипт для анализа и исправления кода
- `t.py`: Тестовый файл с ошибками для демонстрации

## Безопасность

- Перед каждым изменением создается резервная копия файла
- Изменения применяются только после проверки соответствия исходного кода

## Параметры конфигурации

Вы можете настроить следующие параметры в начале файла `main.py`:

- `DEFAULT_MODEL`: Модель ИИ по умолчанию для анализа кода
- `SITE_URL`: URL вашего сайта (для статистики OpenRouter)
- `SITE_NAME`: Название вашего проекта (для статистики OpenRouter)

## Как это работает

1. Скрипт считывает содержимое файла Python
2. Отправляет код в языковую модель через OpenRouter API
3. Модель анализирует код и находит ошибки
4. Модель возвращает структурированный JSON с описанием необходимых изменений
5. Скрипт создает резервную копию файла
6. Скрипт применяет предложенные изменения к файлу
7. Результаты выводятся в консоль

## Поддерживаемые типы изменений

- `replace`: Замена фрагмента кода
- `insert`: Вставка нового кода
- `delete`: Удаление фрагмента кода